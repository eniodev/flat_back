datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Criterios_Divisao_Despesas {
  id              Int                   @id @default(autoincrement())
  descricao       Criterios_Divisao?
  divisao_Despesas Divisao_Despesas[]
  Despesa         Despesas[]

  @@map("criterios_divisao_despesas")
}

model Divisao_Despesas {
  id                         Int                       @id @default(autoincrement())
  morador                    Int?
  despesa                    Int?
  valorPago                  Float?
  proporcao                  Float?
  moradorFk                  Moradores?                  @relation(fields: [morador], references: [id])
  despesaFk                  Despesas?                  @relation(fields: [despesa], references: [id])
  Criterios_Divisao_Despesas   Criterios_Divisao_Despesas? @relation(fields: [criterios_Divisao_DespesasId], references: [id])
  criterios_Divisao_DespesasId Int?
}

model Despesas {
  id              Int                       @id @default(autoincrement())
  descricao       String?
  valor           Float?
  data            DateTime?
  criterio_divisao Int?
  recorrente      Boolean?
  criterioFk      Criterios_Divisao_Despesas? @relation(fields: [criterio_divisao], references: [id])
  DivisaoDespesas Divisao_Despesas[]
}

model ModalidadesPagamento {
  id        Int                       @id @default(autoincrement())
  descricao ModalidadesPagamentoEnum?
}

model Moradores {
  id              Int               @id @default(autoincrement())
  nome            String?
  email           String?
  data_nascimento  DateTime?
  senha           String?
  isAdmin         Boolean?
  quartos         Quarto[]
  divisaoDespesas Divisao_Despesas[]
}

model Quarto {
  id         Int       @id @default(autoincrement())
  numero     Int?
  tamanho    Float?
  morador    Int?
  dataInicio DateTime?
  dataFim    DateTime?
  moradorFk  Moradores?  @relation(fields: [morador], references: [id])
}

enum Criterios_Divisao {
  igual
  renda
  quarto
}

enum ModalidadesPagamentoEnum {
  referencia
  cash
}
